# Copyright 2021 IBM Corporation
# 
# Licensed under the Apache License, Version 2.0 (the "License"); 
# you may not use this file except in compliance with the License. 
# You may obtain a copy of the License at 
# 
#     http://www.apache.org/licenses/LICENSE-2.0 
# 
# Unless required by applicable law or agreed to in writing, software 
# distributed under the License is distributed on an "AS IS" BASIS, 
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
# See the License for the specific language governing permissions and 
# limitations under the License. 
name: "Image Completer"
model_identifier: max-image-completer
description: "Recognize and extract faces in an image and complete the corrupted portions."
author:
  name: "IBM CODAIT"
  email: "no-reply@ibm.com"
framework:
  name: "tensorflow"
  version: "1.13"
  runtimes:
      name: python
      version: "3.6"

license: "Apache 2.0"
domain: "image-translation-model"
website: "https://developer.ibm.com/exchanges/models/all/max-image-completer/"

train:
  trainable: true
  credentials_required: true
  input_params:
    - {name: "github_url", description: "URL of the training credentials on GitHub", default: ""}
    - {name: "github_token", description: "GitHub token required to access the credentials", default: ""}
  tested_platforms:
    - WatsonML
  model_source:
    initial_model:
      data_store: cloud_training_datastore
      bucket: test-data1234567
      path: model.zip
      url:
    initial_model_local:
      path: training_code/
  model_training_results:
    trained_model:
      data_store: cloud_training_datastore
      bucket: test-result1234567
      path:
      url:
    trained_model_local:
      path: assets/
  data_source:
    training_data:
      data_store: cloud_training_datastore
      bucket: test-data1234567
      path: aligned
      training_data_url:
    training_data_local:
      path: sample_training_data

  mount_type: mount_cos
  execution:
    command: ./train-max-model.sh
    compute_configuration:
      name: k80
      nodes: 1


process:
    - name: training_process
      params:
       staging_dir: training_output/
       trained_model_path: trained_model/tensorflow/checkpoint/


data_stores:
  - name: cloud_training_datastore
    type: s3
    connection:
      endpoint: https://s3.us.cloud-object-storage.appdomain.cloud
